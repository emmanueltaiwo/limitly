---
title: rateLimit()
description: Quick helper function that returns a configured rate limiter. Perfect for simple use cases with zero configuration.
---

# rateLimit(config?)

A quick helper function that returns a pre-configured rate limiter function. This is the simplest way to get started with Limitly - perfect for basic use cases that don't require advanced configuration.

## Function Signature

```typescript
function rateLimit(config?: LimitlyConfig | string): RateLimitFunction

type RateLimitFunction = (
  options?: RateLimitOptions | string
) => Promise<LimitlyResponse>
```

## Parameters

### `config` (optional)

Either a configuration object or a service ID string:

```typescript
// As an object
rateLimit({ serviceId: 'my-api', timeout: 5000 })

// As a string (shorthand for serviceId)
rateLimit('my-api')
```

## Returns

A function that can be called to check rate limits:

```typescript
const checkLimit = rateLimit();
const result = await checkLimit('user-123');
```

## Basic Usage

The simplest usage with default settings:

```typescript
import { rateLimit } from 'limitly-sdk';

// Create a rate limiter with defaults
const checkLimit = rateLimit();

// Check rate limit (uses default: 100 capacity, 10 refillRate)
const result = await checkLimit('user-123');

if (result.allowed) {
  console.log(`Allowed. ${result.remaining} requests remaining.`);
} else {
  console.log('Rate limited!');
}
```

## With Service ID

Specify a service ID to isolate rate limits:

```typescript
// Using object syntax
const checkLimit = rateLimit({ serviceId: 'my-api' });

// Using string shorthand
const checkLimit = rateLimit('my-api');

// All checks use the same service ID
await checkLimit('user-123');
await checkLimit('user-456');
```

## Custom Configuration

Pass a full configuration object:

```typescript
const checkLimit = rateLimit({
  serviceId: 'my-api',
  redisUrl: 'redis://localhost:6379',
  timeout: 3000
});
```

## Custom Rate Limits Per Request

Override limits for individual requests:

```typescript
const checkLimit = rateLimit('my-api');

// Use default limits
const result1 = await checkLimit('user-123');

// Override with custom limits
const result2 = await checkLimit({
  identifier: 'user-123',
  capacity: 50,      // Custom capacity
  refillRate: 5      // Custom refill rate
});
```

## String Identifier Shorthand

When passing just a string, it's treated as the identifier:

```typescript
const checkLimit = rateLimit('my-api');

// These are equivalent:
await checkLimit('user-123');
await checkLimit({ identifier: 'user-123' });
```

## Multiple Rate Limiters

Create multiple rate limiters for different use cases:

```typescript
// Authentication - strict limits
const authLimiter = rateLimit({
  serviceId: 'auth',
  timeout: 2000
});

// Public API - moderate limits
const apiLimiter = rateLimit({
  serviceId: 'public-api',
  timeout: 5000
});

// Background jobs - lenient limits
const jobLimiter = rateLimit({
  serviceId: 'jobs',
  timeout: 10000
});

// Use them independently
await authLimiter('user-123');
await apiLimiter('user-123');
await jobLimiter('user-123');
```

## Real-World Example

Protect a Next.js API route:

```typescript
// app/api/protected/route.ts
import { rateLimit } from 'limitly-sdk';
import { NextResponse } from 'next/server';

const checkLimit = rateLimit({ serviceId: 'nextjs-api' });

export async function GET(request: Request) {
  const userId = request.headers.get('x-user-id') || 'anonymous';
  
  const result = await checkLimit(userId);
  
  if (!result.allowed) {
    return NextResponse.json(
      { error: 'Rate limit exceeded' },
      { status: 429 }
    );
  }
  
  return NextResponse.json({ 
    success: true,
    remaining: result.remaining 
  });
}
```

## When to Use `rateLimit()` vs `createClient()`

### Use `rateLimit()` when:
- ✅ You want simple, zero-configuration setup
- ✅ You have a single service or simple use case
- ✅ You don't need multiple client instances
- ✅ Default settings work for your needs

### Use `createClient()` when:
- ✅ You need multiple client instances
- ✅ You want more control over configuration
- ✅ You need to reuse the client across modules
- ✅ You want to extend client functionality

## Default Behavior

When no configuration is provided, `rateLimit()` uses:

- **Service ID**: `'default'`
- **Timeout**: `5000` milliseconds
- **Default limits**: `capacity: 100`, `refillRate: 10`
