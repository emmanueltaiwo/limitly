---
title: Basic Usage
description: Simple examples of using Limitly in your application. Learn the fundamentals with practical code examples.
---

# Basic Usage

Simple, practical examples for common use cases.

## Simple Rate Limiting

```typescript
import { rateLimit } from 'limitly-sdk';

const checkLimit = rateLimit();

async function handleRequest(userId: string) {
  const result = await checkLimit(userId);
  
  if (!result.allowed) {
    throw new Error('Rate limit exceeded');
  }
  
  return { success: true, remaining: result.remaining };
}
```

## Response Structure

```typescript
interface LimitlyResponse {
  allowed: boolean;
  limit?: number;
  remaining?: number;
  reset?: number;
  message?: string;
}
```

## Custom Limits

```typescript
const result = await checkLimit({
  identifier: 'user-123',
  capacity: 50,
  refillRate: 5
});
```

## Per-User Limiting

```typescript
const checkLimit = rateLimit({ serviceId: 'user-api' });

async function handleUserRequest(userId: string) {
  const result = await checkLimit(userId);
  
  if (!result.allowed) {
    return { error: 'Rate limit exceeded' };
  }
  
  return { success: true, remaining: result.remaining };
}
```

## IP-Based Limiting

```typescript
const ip = request.headers.get('x-forwarded-for')?.split(',')[0] || 'unknown';
const result = await checkLimit(ip);

if (!result.allowed) {
  return Response.json({ error: 'Too many requests' }, { status: 429 });
}
```

## Endpoint-Specific Limits

```typescript
const endpointLimits = {
  '/api/login': { capacity: 5, refillRate: 0.1 },
  '/api/search': { capacity: 100, refillRate: 10 }
};

const result = await checkLimit({
  identifier: `${userId}:${endpoint}`,
  ...endpointLimits[endpoint]
});
```

## Error Handling

```typescript
try {
  const result = await checkLimit(userId);
  if (!result.allowed) {
    return { error: 'Rate limit exceeded' };
  }
  return { success: true };
} catch (error) {
  // Fail open
  return { success: true, rateLimitError: true };
}
```

## HTTP Headers

```typescript
const headers = new Headers();
if (result.limit) headers.set('X-RateLimit-Limit', result.limit.toString());
if (result.remaining !== undefined) {
  headers.set('X-RateLimit-Remaining', result.remaining.toString());
}

if (!result.allowed) {
  return Response.json({ error: 'Rate limit exceeded' }, { status: 429, headers });
}
```

## Service Isolation

```typescript
const apiLimiter = rateLimit({ serviceId: 'api-service' });
const authLimiter = rateLimit({ serviceId: 'auth-service' });
```

## Next Steps

- [Advanced Examples](./advanced) - Complex scenarios
- [Custom Strategies](./custom-strategies) - Custom logic
- [API Reference](../api-reference/ratelimit) - Full docs
